# Setting Copy Mode Key Binding
set -g mode-keys vi

# コピーモードの「M-w」でバッファにコピーすると同時にOSのクリップボードにもコピーする
# bind-key -t copy-mode-vi y copy-pipe 'reattach-to-user-namespace pbcopy' 
# Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send -X copy-pipe "reattach-to-user-namespace pbcopy"

# bind-key v copy-mode \; display "Copy mode!"

# copy-mode ^[
unbind ^"["
bind -r ^"[" copy-mode
unbind ^]
bind -r ^] paste-buffer

# max history limit
set -g history-limit 100000

# escape time
set -s escape-time 0

# count windows stating with 1 instead of 0
set -g base-index 1
set -g pane-base-index 1

# Automatically set window title
setw -g automatic-rename off

#
#---------------------------------------------------------------------------}}}
# Mouse settings                                                            {{{
#------------------------------------------------------------------------------

# Mouse mode
set-option -g mouse on

# Toggle mouse on
bind m \
    set -g mode-mouse on \;\
    set -g mouse-resize-pane on \;\
    set -g mouse-select-pane on \;\
    set -g mouse-select-window on \;\
    display 'Mouse: ON'

# Toggle mouse off
bind M \
    set -g mode-mouse off \;\
    set -g mouse-resize-pane off \;\
    set -g mouse-select-pane off \;\
    set -g mouse-select-window off \;\
    display 'Mouse: OFF'

#
#---------------------------------------------------------------------------}}}
# Color                                                                     {{{
#------------------------------------------------------------------------------

# use 256colors
set -g default-terminal screen-256color

# pane border
set -g pane-active-border-fg colour41
set -g pane-active-border-bg colour234
set -g pane-border-fg colour236
set -g pane-border-bg colour234

# status bar
set -g status-fg white
set -g status-bg colour236

# window list
setw -g window-status-fg white
setw -g window-status-bg default
setw -g window-status-attr dim

# message line
set -g message-fg white
set -g message-bg colour234
set -g message-attr bright
#
#---------------------------------------------------------------------------}}}
# WM window title                                                           {{{
#------------------------------------------------------------------------------

# enable wm window titles
set -g set-titles on

# wm window title string (uses status bar variables)
set -g set-titles-string "tmux - #S > [#I]:#W"
#
#---------------------------------------------------------------------------}}}
# Status line                                                               {{{
#------------------------------------------------------------------------------

set -g status on
set -g status-position bottom
set -g status-interval 30
set -g status-justify "centre"
set -g status-left-length 20
set -g status-left '#[fg=colour255,bg=colour26,bold] #S #[fg=colour26,bg=colour236]'

set -g status-right '#[fg=white,bg=colour233,bold] %H:%M '
setw -g window-status-format "#[fg=white] #I:#W "
setw -g window-status-current-format "#[fg=colour236,bg=colour26,bold] #I:#W "
set -g status-right '#[fg=colour233,bg=colour236]#[fg=white,bg=colour233,bold] %H:%M '
# setw -g window-status-format "#[fg=white]#I:#W"
# setw -g window-status-current-format "#[fg=colour236,bg=colour248]#[fg=colour236,bg=colour248,bold] #I:#W #[fg=colour248,bg=colour237]"
#
#---------------------------------------------------------------------------}}}



# 設定ファイルをリロードする
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# reset window number at closing it
set-option -g renumber-windows on

bind-key N switch-client -n
bind-key P switch-client -p

bind-key Tab choose-tree

set-option -g default-command "reattach-to-user-namespace -l zsh"


unbind-key s
bind-key s command-prompt "select-window -t '%%'"



set-option -g status-position top


#### COLOUR (Solarized dark)

# default statusbar colors
set-option -g status-bg black #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg black #base02
set-option -g pane-active-border-fg brightgreen #base01

# message text
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

# clock
set-window-option -g clock-mode-colour green #green

# bell
set-window-option -g window-status-bell-style fg=black,bg=red #base02, red

set -g status-interval 0

bind z resize-pane -Z

# keybind

unbind-key C-b

# prefix key ^b -> ^g
set -g prefix C-g
bind-key C-g send-prefix

# move between panes
# (xmonad like)
bind-key -n M-j select-pane -t :.+
bind-key -n M-k select-pane -t :.-

# create new window
bind-key -n M-Enter new-window

# split window
bind-key -n M-- split-window -v -c "#{pane_current_path}"
bind-key -n M-\ split-window -h -c "#{pane_current_path}"

# move pane
bind-key -n M-j select-pane -t :.+
bind-key -n M-k select-pane -t :.-

# move window
bind-key -n M-l next-window
bind-key -n M-h next-window
